{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "definitions": {
        "clouds": {
            "oneOf": [
                {
                    "$geoweb::messages": {
                        "maxItems": "Four cloud groups are only possible if the fourth cloud has CB or TCU and the former three cloud groups have no such qualifiers"
                    },
                    "items": [
                        {
                            "$ref": "#/definitions/first_cloud_mod"
                        },
                        {
                            "$ref": "#/definitions/second_cloud_mod"
                        },
                        {
                            "$ref": "#/definitions/third_cloud_mod"
                        }
                    ],
                    "maxItems": 3,
                    "minItems": 0,
                    "type": "array"
                },
                {
                    "items": [
                        {
                            "$ref": "#/definitions/first_cloud"
                        },
                        {
                            "$ref": "#/definitions/second_cloud"
                        },
                        {
                            "$ref": "#/definitions/third_cloud"
                        },
                        {
                            "$ref": "#/definitions/fourth_cloud"
                        }
                    ],
                    "maxItems": 4,
                    "minItems": 4,
                    "type": "array"
                },
                {
                    "enum": [
                        "NSC"
                    ],
                    "type": "string"
                }
            ]
        },
        "first_cloud": {
            "additionalProperties": false,
            "properties": {
                "amount": {
                    "$geoweb::messages": {
                        "enum": "First cloud group can only be one of few, scattered, broken, or overcast"
                    },
                    "enum": [
                        "FEW",
                        "SCT",
                        "BKN",
                        "OVC"
                    ],
                    "type": "string"
                },
                "height": {
                    "$geoweb::messages": {
                        "maximum": "Clouds cannot be higher than FL1000",
                        "minimum": "Clouds cannot be lower than FL000"
                    },
                    "maximum": 999,
                    "minimum": 0,
                    "type": "integer"
                }
            },
            "required": [
                "amount",
                "height"
            ],
            "type": "object"
        },
        "first_cloud_mod": {
            "additionalProperties": false,
            "properties": {
                "amount": {
                    "$geoweb::messages": {
                        "enum": "First cloud group can only be one of few, scattered, broken, or overcast"
                    },
                    "enum": [
                        "FEW",
                        "SCT",
                        "BKN",
                        "OVC"
                    ],
                    "type": "string"
                },
                "height": {
                    "$geoweb::messages": {
                        "maximum": "Clouds cannot be higher than FL1000",
                        "minimum": "Clouds cannot be lower than FL000"
                    },
                    "maximum": 999,
                    "minimum": 0,
                    "type": "integer"
                },
                "mod": {
                    "enum": [
                        "CB",
                        "TCU"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "amount",
                "height"
            ],
            "type": "object"
        },
        "fourth_cloud": {
            "additionalProperties": false,
            "properties": {
                "amount": {
                    "$geoweb::messages": {
                        "enum": "Fourth cloud group can only be broken or overcast"
                    },
                    "enum": [
                        "BKN",
                        "OVC"
                    ],
                    "type": "string"
                },
                "height": {
                    "$geoweb::messages": {
                        "maximum": "Clouds cannot be higher than FL1000",
                        "minimum": "Clouds cannot be lower than FL000"
                    },
                    "maximum": 999,
                    "minimum": 0,
                    "type": "integer"
                },
                "mod": {
                    "enum": [
                        "CB",
                        "TCU"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "mod",
                "height",
                "amount"
            ],
            "type": "object"
        },
        "second_cloud": {
            "additionalProperties": false,
            "properties": {
                "amount": {
                    "$geoweb::messages": {
                        "enum": "Second cloud group can only be one of scattered, broken, or overcast"
                    },
                    "enum": [
                        "SCT",
                        "BKN",
                        "OVC"
                    ],
                    "type": "string"
                },
                "height": {
                    "$geoweb::messages": {
                        "maximum": "Clouds cannot be higher than FL1000",
                        "minimum": "Clouds cannot be lower than FL000"
                    },
                    "maximum": 999,
                    "minimum": 0,
                    "type": "integer"
                }
            },
            "required": [
                "amount",
                "height"
            ],
            "type": "object"
        },
        "second_cloud_mod": {
            "oneOf": [
                {
                    "additionalProperties": false,
                    "properties": {
                        "amount": {
                            "$geoweb::messages": {
                                "enum": "Second cloud group can only be one of scattered, broken, or overcast"
                            },
                            "enum": [
                                "SCT",
                                "BKN",
                                "OVC"
                            ],
                            "type": "string"
                        },
                        "height": {
                            "$geoweb::messages": {
                                "maximum": "Clouds cannot be higher than FL1000",
                                "minimum": "Clouds cannot be lower than FL000"
                            },
                            "maximum": 999,
                            "minimum": 0,
                            "type": "integer"
                        }
                    },
                    "required": [
                        "amount",
                        "height"
                    ]
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "amount": {
                            "enum": [
                                "SCT",
                                "BKN",
                                "OVC",
                                "FEW"
                            ],
                            "type": "string"
                        },
                        "height": {
                            "$geoweb::messages": {
                                "maximum": "Clouds cannot be higher than FL1000",
                                "minimum": "Clouds cannot be lower than FL000"
                            },
                            "maximum": 999,
                            "minimum": 0,
                            "type": "integer"
                        },
                        "mod": {
                            "enum": [
                                "CB",
                                "TCU"
                            ],
                            "type": "string"
                        }
                    },
                    "required": [
                        "amount",
                        "height",
                        "mod"
                    ]
                }
            ],
            "type": "object"
        },
        "third_cloud": {
            "oneOf": [
                {
                    "additionalProperties": false,
                    "properties": {
                        "amount": {
                            "$geoweb::messages": {
                                "enum": "Third cloud group can only be broken or overcast"
                            },
                            "enum": [
                                "BKN",
                                "OVC"
                            ],
                            "type": "string"
                        },
                        "height": {
                            "$geoweb::messages": {
                                "maximum": "Clouds cannot be higher than FL1000",
                                "minimum": "Clouds cannot be lower than FL000"
                            },
                            "maximum": 999,
                            "minimum": 0,
                            "type": "integer"
                        }
                    },
                    "required": [
                        "amount",
                        "height"
                    ]
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "amount": {
                            "enum": [
                                "SCT",
                                "BKN",
                                "OVC",
                                "FEW"
                            ],
                            "type": "string"
                        },
                        "height": {
                            "$geoweb::messages": {
                                "maximum": "Clouds cannot be higher than FL1000",
                                "minimum": "Clouds cannot be lower than FL000"
                            },
                            "maximum": 999,
                            "minimum": 0,
                            "type": "integer"
                        },
                        "mod": {
                            "enum": [
                                "CB"
                            ],
                            "type": "string"
                        }
                    },
                    "required": [
                        "amount",
                        "height",
                        "mod"
                    ]
                }
            ],
            "type": "object"
        },
        "third_cloud_mod": {
            "additionalProperties": false,
            "properties": {
                "amount": {
                    "$geoweb::messages": {
                        "enum": "Third cloud group can only be broken or overcast"
                    },
                    "enum": [
                        "BKN",
                        "OVC"
                    ],
                    "type": "string"
                },
                "height": {
                    "$geoweb::messages": {
                        "maximum": "Clouds cannot be higher than FL1000",
                        "minimum": "Clouds cannot be lower than FL000"
                    },
                    "maximum": 999,
                    "minimum": 0,
                    "type": "integer"
                },
                "mod": {
                    "enum": [
                        "CB",
                        "TCU"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "amount",
                "height"
            ],
            "type": "object"
        }
    }
}
